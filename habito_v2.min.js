import gsap from"https://cdn.jsdelivr.net/npm/gsap@3.12.2/index.js";import{ScrollTrigger}from"https://cdn.jsdelivr.net/npm/gsap@3.12.2/ScrollTrigger.js";import{Flip}from"https://cdn.jsdelivr.net/npm/gsap@3.12.2/Flip.js";import{CustomEase}from"https://cdn.jsdelivr.net/npm/gsap@3.12.2/CustomEase.js";import barbaCore from"https://cdn.skypack.dev/@barba/core@2.10.3";import Lenis from"https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.19/dist/lenis.mjs";import SplitType from"https://cdn.jsdelivr.net/npm/split-type@0.3.3/+esm";import Swiper from"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs";function initGSAP(){gsap.registerPlugin(CustomEase,Flip,ScrollTrigger),CustomEase.create("primary-ease","0.62, 0.05, 0.01, 0.99"),CustomEase.create("primary-ease-out","0.17,0.84,0.44,1"),ScrollTrigger.defaults({markers:!1}),gsap.defaults({duration:1.25})}function initLenis(){if(void 0===Webflow.env("editor")){const e=new Lenis;return e.on("scroll",ScrollTrigger.update),gsap.ticker.add((t=>{e.raf(1e3*t)})),gsap.ticker.lagSmoothing(0),e}}function resetWebflow(e){const t=$((new DOMParser).parseFromString(e.next.html,"text/html")).find("html");$("html").attr("data-wf-page",t.attr("data-wf-page")),window.Webflow&&window.Webflow.destroy(),window.Webflow&&window.Webflow.ready(),window.Webflow&&window.Webflow.require("ix2").init(),$(".w--current").removeClass("w--current"),$("a").each((function(){$(this).attr("href")===window.location.pathname&&$(this).addClass("w--current")})),t.find("[data-barba-script]").each((function(){let e=$(this).text();if(e.includes("DOMContentLoaded")){const t=e.replace(/window\.addEventListener\("DOMContentLoaded",\s*\(\s*event\s*\)\s*=>\s*{\s*/,"");e=t.replace(/\s*}\s*\);\s*$/,"")}const t=document.createElement("script");t.type="text/javascript",$(this).attr("src")&&(t.src=$(this).attr("src")),t.text=e,document.body.appendChild(t).remove()}))}function disableCurrentLinks(){document.addEventListener("click",(function(e){const t=e.target.closest("a");t&&window.location.href.split("#")[0]===t.href.split("#")[0]&&e.preventDefault()}))}function initSplitText(){new SplitType("[split-1]",{types:"chars",tagName:"span"}),new SplitType("[split-2]",{types:"lines, words, chars",tagName:"div"});$("[split-2] .line").each((function(){$(this).wrap('<div class="line-wrap"></div>')}))}function initMarquee(){gsap.to("[marquee]",{xPercent:-100,ease:"linear",duration:50,repeat:-1})}function initTrMarquee(){function e(e,t){const n=typeof e;return"string"!=typeof t||""===t.trim()?e:"true"===t&&"boolean"===n||("false"!==t||"boolean"!==n)&&(isNaN(t)&&"string"===n?t:isNaN(t)||"number"!==n?e:+t)}$("[tr-marquee-element='component']").each((function(){function t(e){u=e;const t={value:1},n=gsap.timeline({onUpdate:()=>g.timeScale(t.value)});e?(n.fromTo(t,{value:d},{value:0,duration:.5}),r.addClass("is-paused")):(n.fromTo(t,{value:0},{value:d,duration:.5}),r.removeClass("is-paused"))}let n=$(this),o=n.find("[tr-marquee-element='panel']"),i=n.find("[tr-marquee-element='triggerhover']"),r=n.find("[tr-marquee-element='triggerclick']"),a=e(100,n.attr("tr-marquee-speed")),s=e(!1,n.attr("tr-marquee-vertical")),c=e(!1,n.attr("tr-marquee-reverse")),l=e(!1,n.attr("tr-marquee-scrolldirection")),p=e(!1,n.attr("tr-marquee-scrollscrub")),m=-100,d=1,u=!1;c&&(m=100);const g=gsap.timeline({repeat:-1,onReverseComplete:()=>g.progress(1)});s?(a=o.first().height()/a,g.fromTo(o,{yPercent:0},{yPercent:m,ease:"none",duration:a})):(a=o.first().width()/a,g.fromTo(o,{xPercent:0},{xPercent:m,ease:"none",duration:a}));const f={value:1};ScrollTrigger.create({trigger:"body",start:"top top",end:"bottom bottom",onUpdate:e=>{if(!u&&(l&&d!==e.direction&&(d=e.direction,g.timeScale(e.direction)),p)){let t=.006*e.getVelocity();t=gsap.utils.clamp(-20,20,t),gsap.timeline({onUpdate:()=>g.timeScale(f.value)}).fromTo(f,{value:t},{value:d,duration:.5})}}}),window.matchMedia("(pointer: fine)").matches&&(i.on("mouseenter",(()=>t(!0))),i.on("mouseleave",(()=>t(!1)))),r.on("click",(function(){$(this).hasClass("is-paused")?t(!1):t(!0)}))}))}function initScrollToTop(e){const t=document.querySelector("[scroll-to-top]");t&&t.addEventListener("click",(()=>{e.scrollTo(0,{duration:1.2,easing:e=>1-Math.pow(1-e,4)})}))}function initReelsAnimation(){$(".about-wrapper").each((function(){const e=$(this),t=$(".reels-wrap");gsap.timeline({scrollTrigger:{trigger:e,start:"top 70%",end:"bottom 50%",scrub:1}}).fromTo(t,{width:"100%",y:"0svh"},{width:"25%",y:"167svh"})}))}function aboutReelsAnimation(){$(".section-hero-group").each((function(){const e=$(this),t=$(".reels-wrap");gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:"90% bottom",scrub:1}}).fromTo(t,{y:"-88svh",x:"70svw",width:"25%"},{y:"0",x:"0",width:"100%"})}))}function initReelsFlip(){$(document).ready((function(){const e=$(".reels-wrap").parent(),t=$(".about-reels");ScrollTrigger.create({trigger:".section.is-about",start:"top 30%",end:"bottom 50%",onEnter:()=>moveReels(t),onLeaveBack:()=>moveReels(e)})}))}function moveReels(e){const t=Flip.getState($(".reels-wrap")[0]);e.append($(".reels-wrap")),Flip.from(t,{duration:1.5,ease:"none"})}function initWorkSectionAnimation(){$(".work-head-block").each((function(){const e=$(this),t=$(".section.is-work");gsap.timeline({scrollTrigger:{trigger:e,start:"bottom 75%",end:"bottom bottom",scrub:1}}).fromTo(t,{backgroundColor:"#CBEB3A",color:"#111"},{backgroundColor:"#111",color:"#fff"}),gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:"bottom 50%",scrub:1}}).from(".work-head-wrap",{scale:1.75})}))}function initBrandingAnimation(){$(".section.is-branding").each((function(){const e=$(this);gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:"80% bottom",scrub:1}}).fromTo(".branding-head",{scale:.55},{scale:1}).fromTo(".branding-head-wrap",{scale:1.6},{scale:1},0),gsap.timeline({scrollTrigger:{trigger:e,start:"10% top",end:"80% bottom",scrub:1}}).fromTo(".section-nav",{opacity:0},{opacity:1}).fromTo("[branding-img]",{width:"0em"},{width:"7.5em"}).fromTo("[text-wrap]",{x:"-0.75em"},{x:"0em"}).from(".branding-head-wrap",{yPercent:35},{yPercent:0})}))}function initPartnerAccordion(){$(".partner-item").each((function(e){const t=$(this),n=t.find(".client-img"),o=t.find(".client-name"),i=t.find(".partner-item-content");0===e?(t.addClass("active"),i.show(),gsap.set(n,{scale:1}),gsap.set(o,{x:0})):(gsap.set(n,{scale:0}),gsap.set(o,{x:-52}),i.hide()),t.hover((function(){$(this).hasClass("active")||(gsap.to(n,{scale:1,duration:.3,ease:"power2.out"}),gsap.to(o,{x:0,duration:.3,ease:"power2.out"}))}),(function(){$(this).hasClass("active")||(gsap.to(n,{scale:0,duration:.3,ease:"power2.out"}),gsap.to(o,{x:-52,duration:.3,ease:"power2.out"}))})),t.on("click",(function(){const e=$(this).hasClass("active");$(".partner-item").removeClass("active"),$(".partner-item-content").stop(!0,!0).slideUp(),gsap.to($(".client-img"),{scale:0,duration:.3,ease:"power2.out"}),gsap.to($(".client-name"),{x:-52,duration:.3,ease:"power2.out"}),e||($(this).addClass("active"),i.stop(!0,!0).slideDown(),gsap.to(n,{scale:1,duration:.3,ease:"power2.out"}),gsap.to(o,{x:0,duration:.3,ease:"power2.out"}))}))}))}function initServiceAnimation(){$(".section.is-service").each((function(){const e=$(this);gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%",end:"bottom top",scrub:1}}).fromTo(".service-head",{x:"50vw"},{x:"-80vw"}),gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%",end:"bottom bottom",scrub:1}}).from(".service-text .char",{y:"75svh",scale:1.5,stagger:{each:.3}}),gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:"bottom bottom",scrub:1}}).fromTo(".service-item",{y:"100svh",stagger:.2},{y:"0",stagger:.2})}))}function imgReveal(){gsap.timeline({scrollTrigger:{trigger:"[img-wrap]",start:"top 80%",end:"top top"}}).from(".img-block",{yPercent:-100,duration:1.25,ease:"primary-ease-out"}).from("[img-wrap]",{scale:1.2,duration:1.25,ease:"primary-ease-out"})}function initHeadOverlay(){gsap.timeline({scrollTrigger:{trigger:".section.is-about",start:"top bottom",end:"bottom top",scrub:1}}).to(".overlay",{opacity:.5})}function initSectionOverlap(){gsap.utils.toArray("[data-overlap-previous]").forEach((e=>{const t=e.previousElementSibling;if(!t)return;const n=document.createElement("div");n.className="g_section-overlay",t.appendChild(n);const o=()=>window.innerHeight/4,i=gsap.timeline({scrollTrigger:{trigger:e,start:"top bottom",end:"top top",scrub:!0,onRefresh:e=>{e.end=`bottom+=${o()}px top`}}});i.to(t,{y:()=>o(),rotate:.001,ease:"none"},0),i.to(n,{opacity:.5,ease:"none"},0),ScrollTrigger.create({trigger:e,start:"top bottom",end:"top top",onEnter:()=>{gsap.set(e,{zIndex:1}),gsap.set(t,{zIndex:0})},onLeaveBack:()=>{gsap.set(e,{zIndex:"auto"}),gsap.set(t,{zIndex:"auto"})}})}))}function reviewSwiper(){new Swiper(".swiper.is-review",{direction:"horizontal",slidesPerView:1,spaceBetween:24,loop:!0,speed:400,navigation:{nextEl:".swiper-btn-next",prevEl:".swiper-btn-prev"}})}function linesAnimation(){$("[text-reveal]").each((function(){const e=$(this),t=e.find(".line");gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%"}}).from(t,{yPercent:110,stagger:.1,duration:1.25,ease:"primary-ease-out"})}))}function leaveAnimation(e){const t=document.querySelector(".transition-overlay"),n=gsap.timeline();return gsap.set(t,{display:"block"}),"closed"!==navStatus&&(setNavStatus("closing"),closeNav(navStatus,setNavStatus)),n.to(e,{opacity:.1,y:"-20svh",scale:.94,ease:"primary-ease"}).from(t,{autoAlpha:0},0),n}function enterAnimation(e){const t=gsap.timeline({onComplete:()=>{ScrollTrigger.refresh(),gsap.set(e,{clearProps:"transform"})}});return t.from(e,{y:"100svh",ease:"primary-ease",duration:1.25}),t}function handleMouseMove(e){const t=document.querySelector(".hero-top"),n=document.querySelector(".reels-wrap");if(!t||!n)return;const o=t.getBoundingClientRect(),i=n.getBoundingClientRect(),r=e.clientX,a=window.innerWidth,s=o.width-i.width;let c=r/a*s;c=Math.max(0,Math.min(c,s)),gsap.to(n,{x:c,duration:2,ease:"power3.out"})}function initAllAnimations(){initSplitText(),initMarquee(),initTrMarquee(),linesAnimation(),document.addEventListener("mousemove",handleMouseMove),initHeadOverlay(),initWorkSectionAnimation(),initBrandingAnimation(),initServiceAnimation(),initPartnerAccordion(),reviewSwiper(),ScrollTrigger.matchMedia({"(min-width: 992px)":function(){initSectionOverlap()}})}function firstLoad(){const e=document.getElementById("loader"),t=gsap.timeline({onComplete:()=>{e.remove()}});return t.to(e,{y:"-100svh",duration:1.25,ease:"primary-ease"}),t}function initHomeAnimation(){const e=gsap.timeline();new SplitType("[load-split]",{types:"lines, words, chars",tagName:"span"});e.from("[hero-text] .char",{yPercent:110,stagger:{amount:.4},duration:1.25,ease:"primary-ease-out"},.4),e.from("[hero-head] .char",{yPercent:110,duration:1.25,ease:"primary-ease"},.2),e.from("[hero-btn]",{yPercent:50,opacity:0,ease:"primary-ease",duration:1.25},.6),e.from(".reels-wrap",{scale:0,ease:"primary-ease-out",duration:1.25},.6)}function initWorkAnimation(){const e=gsap.timeline();new SplitType("[load-split]",{types:"lines, words, chars",tagName:"span"});e.from("[work-text] .char",{yPercent:110,stagger:{amount:.8},duration:1.25,ease:"primary-ease-out"},.2),e.from('[marquee-name="work"]',{yPercent:110,duration:1.25,ease:"primary-ease-out"},.2)}function initAboutAnimation(){const e=gsap.timeline();new SplitType("[load-split]",{types:"lines, words, chars",tagName:"span"});e.from("[about-text] .char",{yPercent:110,stagger:{amount:.8},duration:1.25,ease:"primary-ease-out"},.2),e.from('[marquee-name="about"]',{yPercent:110,duration:1.25,ease:"primary-ease-out"},.2)}function pageTransitionHome(e){const t=gsap.timeline();return t.add(enterAnimation(e)).add(initHomeAnimation(e),.8),t}function pageTransitionWork(e){const t=gsap.timeline();return t.add(enterAnimation(e)).add(initWorkAnimation(e),.8),t}function pageTransitionAbout(e){const t=gsap.timeline();return t.add(enterAnimation(e)).add(initAboutAnimation(e),.8),t}function homeFirstLoad(e){const t=gsap.timeline();return t.add(firstLoad()).add(initHomeAnimation(e),.8),t}function initPageTransitions(){scroll=initLenis();const e=barbaCore;e.hooks.once((()=>{initAllAnimations(),disableCurrentLinks()})),e.hooks.beforeLeave((e=>{scroll.stop(),resetWebflow(e)})),e.hooks.enter((e=>{gsap.set(e.next.container,{position:"fixed",top:0,left:0,width:"100%",zIndex:3}),disableCurrentLinks()})),e.hooks.afterEnter((()=>{window.scrollTo(0,0)})),e.hooks.after((e=>{gsap.set(e.next.container,{position:"relative"}),initAllAnimations(),scroll.resize(),scroll.start(),ScrollTrigger.refresh()})),e.init({transitions:[{name:"to-home",to:{namespace:"home"},sync:!0,once({next:e}){homeFirstLoad(e.container)},async leave({current:e}){await leaveAnimation(e.container)},enter({next:e}){pageTransitionHome(e.container)}},{name:"to-work",to:{namespace:"work"},sync:!0,once({next:e}){firstLoad(),pageTransitionWork(e.container)},async leave({current:e}){await leaveAnimation(e.container)},enter({next:e}){pageTransitionWork(e.container)}},{name:"to-about",to:{namespace:"about"},sync:!0,once({next:e}){firstLoad(),pageTransitionAbout(e.container)},async leave({current:e}){await leaveAnimation(e.container)},enter({next:e}){pageTransitionAbout(e.container)}},{name:"default",sync:!0,once({next:e}){firstLoad(),enterAnimation(e.container)},async leave({current:e}){await leaveAnimation(e.container)},enter({next:e}){enterAnimation(e.container)}}]})}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".hero-top");e&&e.addEventListener("mousemove",handleMouseMove)}));let mm=gsap.matchMedia(),navStatus="closed";const setNavStatus=e=>{navStatus=e,console.log(navStatus)};initGSAP(),initPageTransitions();